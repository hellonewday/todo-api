<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
          integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
     <link rel="stylesheet" href="./style.css" />
     <title>Document</title>
</head>

<body>
     <h1>To-do App</h1>
     <form method="POST" action="/lists">
          <table>
               <tr>
                    <td><label for="title">Title:</label></td>
                    <td><input class="form" type="text" name="title" placeholder="write something"></td>
               </tr>
               <tr>
                    <td><label for="description">Description:</label></td>
                    <td><textarea class="form" name="description" placeholder="Describe the job"></textarea></td>
               </tr>
          </table>
          <input type="submit" value="Send" class="submit" />

     </form>
     <div>
          <table id="list"></table>
     </div>
     <script>
          var list = document.getElementById("list");

          function fetchData() {
               fetch('http://localhost:8080/lists').then(res => {
                    res.json().then(doc => {
                         var data = doc.data; //Array
                         list.innerHTML = data.map(item => {
                              return `<tr class="rows">
                                        <td id=${item._id}><a class="link" href='/lists/${item._id}'>${item.title}</a></td>
                                        <td> <i onClick="deleteItem('${item._id}')"class="fas fa-trash"></i></td>
                                   </tr>`;
                         }).join(' ')
                    })
               }).catch(err => console.log(err));
          }
          fetchData();

          function deleteItem(id) {
               alert('Item is deleted!')
               fetch(`http://localhost:8080/lists/${id}`, {
                    method: 'DELETE'
               });
               location.reload();
          }
     </script>

</body>

</html>